/*****************************************************************
   Copyright 2008 by iNet Solutions (info@truthinet.com.vn)

   Licensed under the iNet Solutions Corp.,;
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at

       http://www.truthinet.com/licenses

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.
*****************************************************************/
(function(){if(window.google&&google.gears){return}var a=null;if(typeof GearsFactory!=="undefined"){a=new GearsFactory()}else{try{a=new ActiveXObject("Gears.Factory")}catch(b){if(navigator.mimeTypes["application/x-googlegears"]){a=document.createElement("object");a.style.display="none";a.width=0;a.height=0;a.type="application/x-googlegears";document.documentElement.appendChild(a)}}}if(!a){return}if(!window.google){window.google={}}if(!google.gears){google.gears={factory:a}}})(); 
iNet={version:"1.0 BETA"};Ext.namespace("iNet","iNet.iwebos","iNet.iwebos.data","iNet.iwebos.data.db","iNet.iwebos.data.common","iNet.iwebos.ui","iNet.iwebos.ui.common","iNet.iwebos.ui.common.control","iNet.iwebos.ui.common.button","iNet.iwebos.ui.common.dialog","iNet.iwebos.ui.common.grid","iNet.iwebos.ui.common.store","iNet.iwebos.ui.common.tree","iNet.iwebos.ui.common.search","iNet.iwebos.ui.paperwork","iNet.iwebos.ui.mail","iNet.iwebos.ui.mail.grid","iNet.iwebos.ui.account","iNet.iwebos.ui.org");Ext.BLANK_IMAGE_URL="images/s.gif";Ext.namespace("idesk.webos.message","idesk.webos.message.navigate","idesk.webos.message.paperwork","iwebos.message","iwebos.resources","iwebos.resources.paperwork","iwebos.resources.paperwork.dw","iwebos.resources.paperwork.ed","iwebos.message.action","iwebos.message.grouping","iwebos.message.paperwork","iwebos.message.paperwork.ed","iwebos.message.paperwork.dc","iwebos.message.paperwork.file","iwebos.message.paperwork.ed.newdocument","iwebos.message.paperwork.ed.process.docwork","iwebos.message.paperwork.ed.process.newdocwork","iwebos.message.paperwork.ed.process.docin","iwebos.message.paperwork.ed.process.task","iwebos.message.paperwork.ed.process.predoc","iwebos.message.paperwork.ed.process.notification","iwebos.message.paperwork.ed.watch","iwebos.message.paperwork.ed.msg","iwebos.message.paperwork.dw","iwebos.message.doc","iwebos.message.doc.status","iwebos.message.doc.priority","iwebos.message.doc.important","iwebos.message.doc.secure","iwebos.message.doc.book","iwebos.message.dialog","iwebos.message.followup","Ext.ux.UploadDialog.Dialog.i18n","iwebos.message.paperwork.ed.pagecopy","iwebos.message.paperwork.ed.pageexchange","iwebos.message.paperwork.ed.pagesubmit","iwebos.message.paperwork.ed.pageinfo","iwebos.message.paperwork.ed.report","iwebos.message.mail","iwebos.message.mail.create","iwebos.message.account","iwebos.message.org");(function(){var a=Ext.form.ComboBox.prototype.onLoad;Ext.form.ComboBox.prototype.onLoad=function(){var e=8;var c=a.apply(this,arguments);var b=Math.max(this.minListWidth||0,this.el.getWidth());var d=false;Ext.each(this.view.getNodes(),function(f){if(!d){d=Ext.fly(f).getFrameWidth("lr")}if(f.scrollWidth){b=Math.max(b,(f.scrollWidth+e))}});if(b>0&&b-d!=this.list.getWidth(true)){this.list.setWidth(b);this.innerList.setWidth(b-this.list.getFrameWidth("lr"))}return c};Ext.override(Ext.tree.TreeNode,{ensureVisible:function(c){var b=this.getOwnerTree();if(b){b.expandPath(this.parentNode?this.parentNode.getPath():this.getPath(),false,function(){var d=b.getNodeById(this.id);b.getTreeEl().scrollChildIntoView(d.ui.anchor);Ext.callback(c)}.createDelegate(this))}}})})();Ext.apply(iNet,{INET_GROUP_IMAGE:"images/common/group.gif",INET_PERSON_IMAGE:"images/common/person.png",INET_TITLE_DLG_HEIGHT:66,INET_PRIORITY_DATA:null,INET_SECURITY_DATA:null,INET_DOC_BOOK_STATUS:null,INET_DOC_TYPE:null,INET_LOCAL_DB:"iwebos.db",INET_CONNECTION:null,INET_DLG_OK:"ok",INET_DLG_CANCEL:"cancel",INET_DATE_FORMAT:"dd/MM/yyyy",INET_PAGE_LIMIT:10,INET_REPORT_DOMAIN_LIMIT:2,INET_REPORT_ACCOUNT_LIMIT:200,INET_USER_NAME:"",INET_USER_CODE:"",init:function(){},dateRenderer:function(a){return function(c){var b=new Date(c);return String.format('<div class="inet-date">{0}&nbsp;&nbsp;</div>',b.dateFormat(a))}},dateGroupRenderer:function(){var i=new Date().clearTime(true);var h=i.getFullYear();var d=i.getTime();var e=i.add(Date.DAY,-1).getTime();var a=i.getFirstDateOfWeek().getTime();var g=i.getFirstDateOfWeek().add(Date.DAY,-7).getTime();var b=i.getFirstDateOfMonth().getTime();var c=i.getFirstDateOfMonth().add(Date.MONTH,-1).getTime();var j=i.getFirstDateOfMonth().add(Date.MONTH,-2).getTime();var k=Date.parseDate(h+"/12/31","Y/m/d").getTime();var f=Date.parseDate(h+"/12/31","Y/m/d").add(Date.YEAR,-1).getTime();return function(n){if(!n){return iwebos.message.paperwork.other}var l=new Date(n);var m=l.clearTime(true).getTime();if(m==d){return idesk.webos.message.paperwork.today}if(m>d){return iwebos.message.paperwork.unavailable}if(m==e){return iwebos.message.paperwork.yesterday}if(m>=a){return iwebos.message.paperwork.currentweek}if(m>=g){return iwebos.message.paperwork.lastweek}if(m>=b){return iwebos.message.paperwork.currentmonth}if(m>=c){return iwebos.message.paperwork.lastmonth}if(m>=j){return iwebos.message.paperwork.lasttwomonth}if(m>=k){return iwebos.message.paperwork.currentyear}if(m>=f){return iwebos.message.paperwork.lastyear}return iwebos.message.paperwork.other}},statusRenderer:function(a){return a?idesk.webos.message.paperwork.booked:idesk.webos.message.paperwork.notbook},bookRenderer:function(a){return((!a||a=="")?idesk.webos.message.paperwork.notbook:a)},importantRenderer:function(a){a=(!a?"0":a);return String.format('<img src="images/important/{0}.png" style="vertical-align: middle;width:8px;height:16px;"/>',a)},securityRenderer:function(a){a=(!a?"0":a);return String.format('<img src="images/security/{0}.png" style="vertical-align:middle;width:16px;height:16px;" />',a)}});iNet.Database={version:"1.0"};Ext.apply(iNet.Database,{init:function(){if(iNet.INET_CONNECTION===null){iNet.INET_CONNECTION=iNet.iwebos.data.db.Connection.getInstance()}if(iNet.INET_CONNECTION!=null&&!iNet.INET_CONNECTION.isOpen()){iNet.INET_CONNECTION.open(iNet.INET_LOCAL_DB)}},nextId:function(a){var d=String(new Date().getTime()).substr(a);var c="ABCDEFGHIJKLMNOPQRSTUVWXYZ";for(var b=0;b<a;b++){d+=c.charAt(Math.floor(Math.random()*26))}return d},getConnection:function(){if(iNet.INET_CONNECTION!==null){return iNet.INET_CONNECTION}this.init();return iNet.INET_CONNECTION},getTransaction:function(){if(iNet.INET_CONNECTION!==null){return iNet.INET_CONNECTION.getTransaction()}this.init();return(iNet.INET_CONNECTION!=null)?iNet.INET_CONNECTION.getTransaction():null},getTable:function(a,b){if(iNet.INET_CONNECTION!==null){return iNet.INET_CONNECTION.getTable(a,b)}this.init();return(iNet.INET_CONNECTION!=null)?iNet.INET_CONNECTION.getTable(a,b):null}});iNet.Ajax={};Ext.apply(iNet.Ajax,{onBeforeRequest:function(c,a){if(a.maskEl){if(this.loadMask){this.loadMask.destroy();delete this.loadMask}var d=a.msg||idesk.webos.message.load_data;var b=!!a.removeMask;this.loadMask=new Ext.LoadMask(a.maskEl,{msg:d,removeMask:b});this.loadMask.show()}},onRequestCompleted:function(c,a,b){if(this.loadMask){this.loadMask.hide();this.loadMask.destroy();delete this.loadMask;Ext.Ajax.un("beforerequest",this.onBeforeRequest,this);Ext.Ajax.un("requestcomplete",this.onRequestCompleted,this);Ext.Ajax.un("requestexception",this.onRequestCompleted,this)}},ghostsuccess:function(a,b){this.redirect(a);var c=b.ghost||{};if(c.success&&typeof c.success=="function"){if(!c.scope){c.success(a,b)}else{c.success.apply(c.scope,[a,b])}}},ghostfailure:function(a,b){this.redirect(a);var c=b.ghost||{};if(c.failure&&typeof c.failure=="function"){if(!c.scope){c.failure(a,b)}else{c.failure.apply(c.scope,[a,b])}}},redirect:function(b){try{var a=Ext.util.JSON.decode(b.responseText)||{};if(a.type==="redirect"){window.location.href=a.target}}catch(c){}},request:function(a){Ext.Ajax.un("beforerequest",this.onBeforeRequest,this);Ext.Ajax.un("requestcomplete",this.onRequestCompleted,this);Ext.Ajax.un("requestexception",this.onRequestCompleted,this);Ext.Ajax.on("beforerequest",this.onBeforeRequest,this);Ext.Ajax.on("requestcomplete",this.onRequestCompleted,this);Ext.Ajax.on("requestexception",this.onRequestCompleted,this);var c=a.headers||{};Ext.apply(c,{"X-Ghost-Request":window.location.href});a.headers=c;var b={success:a.success,failure:a.failure};if(a.scope){b.scope=a.scope}delete a.scope;delete a.failure;delete a.success;a.ghost=b;a.scope=this;a.success=this.ghostsuccess;a.failure=this.ghostfailure;Ext.Ajax.request(a)}});Ext.onReady(function(){iNet.INET_PRIORITY_DATA=[[0,iwebos.message.doc.priority.normal],[1,iwebos.message.doc.priority.high],[2,iwebos.message.doc.priority.very_high]];iNet.INET_SECURITY_DATA=[[0,iwebos.message.doc.secure.normal],[1,iwebos.message.doc.secure.secure],[2,iwebos.message.doc.secure.very_secure],[3,iwebos.message.doc.secure.extreme_secure]];iNet.INET_DOC_BOOK_STATUS=[["all",iwebos.message.doc.book.allbook],["false",iwebos.message.doc.book.notbook],["true",iwebos.message.doc.book.booked]];iNet.INET_DOC_TYPE=[{id:0,value:"DR_ORIGINAL",text:iwebos.message.paperwork.ed.originaldocument},{id:1,value:"DR_COPY_ORIGINAL",text:iwebos.message.paperwork.ed.copydocument},{id:2,value:"DR_DRAFT",text:iwebos.message.paperwork.ed.draftdocument}];iNet.INET_DOC_WORK_STATUS=[["ALL",iwebos.message.paperwork.dw.status_all],["CREATING",iwebos.message.paperwork.dw.status_create],["VIEWONLY",iwebos.message.paperwork.dw.status_view_only],["PROCESSING",iwebos.message.paperwork.dw.status_processing]];iNet.INET_IMPORTANT_DATA=[[0,iwebos.message.doc.important.low],[1,iwebos.message.doc.important.normal],[2,iwebos.message.doc.important.high]]}); 
(function(){var e=[{lang:"vn",resource:"js/ext/resources/ext-lang-vn.js",charset:"UTF-8"},{lang:"en"}];var a=e[0];var h=Ext.urlDecode(window.location.search.substring(1));if(h.lang){for(var c=0;c<e.length;c++){if(h.lang==e[c].lang){a=e[c]}}}var g=a.resource||"js/ext/resources/ext-lang-vn.js";var f=a.charset||"UTF-8";var b=document.createElement("script");b.type="text/javascript";b.src=g;b.charset=f;var d=document.getElementsByTagName("head");if(d!=null&&d.length>0){d[0].appendChild(b)}})(); 
